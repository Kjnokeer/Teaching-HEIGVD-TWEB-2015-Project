<div ng-controller="PollsCtrl" ng-init="loadPollDetails(pollId)">
  <div class='wrapper' >
    <div class='row'>
      <div class='col-lg-12'>
        <form ng-submit="submitPollEdition(pollId)">

          
            <fieldset class='text-center'>
              <legend>Edit a poll</legend>
              <div class="panel panel-default">
                <div class="panel-heading">
                  Poll
                </div>

                <div class="panel-body">
                  <div class='form-group'>
                    <input type="text" ng-model="title" name="title" class="form-control" id="name" placeholder="Title" required>
                  </div>
                  <div class='form-group'>
                    <select name="state" ng-model="state" class="form-control" id="state">
                      <option value="active">Active</option>
                      <option value="closed">Closed</option>
                    </select>
                  </div>
                
                </div>
              </div>

              <hr>

              
              <div ng-repeat="field in table.fields track by $index" class="col-md-6">
                <div class="panel panel-default">
                  <div class="panel-heading">
                    Question {{ $index + 1 }}
                  </div>

                  <div class="panel-body">
                    <div class='form-group'>
                      <input type="text" ng-model='field.title' name="question" class="form-control" placeholder="Title" required>
                    </div>

                    <hr>
                    
                    <div class='form-group col-lg-6' ng-repeat="choice in field.choices track by $index">
                      <div class="input-group">
                        <input type="text" ng-model='field.choices[$index].text' name="choice" class="form-control" placeholder="Enter choice ..." required>
                        <span class="input-group-btn">
                          <button class="btn btn-default" ng-click="removeFormChoice($parent.$index, $index)" type="button">X</button>
                        </span>
                      </div>
                    </div>
                    
                    <div class="col-lg-12">
                      <button type="button" class="btn" ng-click="addFormChoice($index)">Add another choice</button>
                      <button type="button" class="btn" ng-click="removeFormQuestion($index)">Remove question</button>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="col-lg-12" style="margin-bottom: 20px;">
                <button type="button" class="btn" ng-click="addFormQuestion()">Add another question</button>
              </div>

              <div class='text-center col-lg-12' style="margin-bottom: 20px;">
                <div class="col-lg-6"><button type="button" class="btn btn-primary btn-block col-lg-6" ui-sref="polls">Cancel</button></div>
                <div class="col-lg-6"><button type="submit" class="btn btn-primary btn-block">Save changes</button></div>
              </div>

            </fieldset>
        </form>
      </div>
    </div>
  </div>
</div>
